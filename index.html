// 修改 InfoModal 組件
const InfoModal = memo(({ 
    queryStaff, queryVenue, onClose, dates, schedule, aliasMap, 
    setQueryVenue, setQueryStaff, dateIdx, onShiftWeek, onBackToday,
    onDateSelect // <--- 1. 新增這個接收參數
}) => {
    if (!queryStaff && !queryVenue) return null;
    
    return (
        <div className="fixed inset-0 z-[2000] ... (省略)" onClick={onClose}>
            <div className="bg-[var(--mac-bg)] ... (省略)" onClick={e=>e.stopPropagation()}>
                {/* Header 省略 */}
                
                <div id={queryVenue ? "venue-scroll-container" : "staff-scroll-container"} className="...">
                    {dates.map((d, index) => { // 這裡取得 index
                        // ... 省略變數定義 ...
                        
                        // 2. 定義點擊行為：點擊這一行，就切換日期並關閉 Modal
                        const handleRowClick = () => {
                            onDateSelect(index); // 通知主程式切換到這一天
                            onClose();           // 關閉 Modal
                        };

                        return (
                            <div 
                                key={d.fullKey} 
                                id={`modal-row-${d.fullKey}`} 
                                onClick={handleRowClick} // <--- 3. 綁定點擊事件
                                className={`flex ... ${blockClass} cursor-pointer active:scale-[0.98] transition-transform`} // 加上 cursor-pointer 和按壓效果
                            >
                                {/* 內容保持不變 */}
                            </div>
                        );
                    })}
                </div>
            </div>
        </div>
    );
});
