<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PT-RQ35K æ™ºæ…§å°è¦½åŠ©æ‰‹ V21 - Full Architecture</title>
    <style>
        :root { 
            --navy-dark: #0f0f0f; --card-bg: #1a1a1a; --gold: #d4af37; 
            --text-main: #ffffff; --text-sub: #888888; --danger: #ff4d4d; --active-blue: #007aff; --sop-green: #28cd41;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        html, body { background: var(--navy-dark); margin: 0; padding: 0; color: var(--text-main); font-family: -apple-system, "PingFang TC", sans-serif; height: 100vh; overflow: hidden; }

        .main-wrapper { width: 100%; height: 100%; display: flex; flex-direction: column; }
        header { background: #000; color: var(--gold); padding: 12px; text-align: center; border-bottom: 2px solid var(--gold); flex-shrink: 0; font-weight: 900; letter-spacing: 1px; }
        
        .search-area { background: #111; padding: 15px; border-bottom: 1px solid #333; flex-shrink: 0; z-index: 1000; }
        #searchInput { width: 100%; padding: 16px; border-radius: 14px; border: 1px solid #444; background: #222; color: white; font-size: 18px; outline: none; transition: 0.3s; }
        #searchInput:focus { border-color: var(--gold); background: #2a2a2a; }
        
        .btn-group { display: flex; gap: 8px; margin-top: 12px; overflow-x: auto; padding-bottom: 5px; }
        .btn { padding: 8px 15px; border-radius: 8px; border: none; cursor: pointer; font-weight: bold; font-size: 13px; white-space: nowrap; transition: 0.2s; color: white; }
        .btn-toggle { background: var(--active-blue); }
        .btn-gold { background: var(--gold); color: #000; }
        .btn-red { background: var(--danger); }

        .main-container { display: flex; flex: 1; overflow: hidden; }
        @media (max-width: 768px) { .main-container { flex-direction: column; } }

        .tree-view { width: 45%; overflow-y: auto; padding: 15px; border-right: 1px solid #222; scroll-behavior: smooth; }
        .guide-view { width: 55%; overflow-y: auto; padding: 20px; background: #0a0a0a; scroll-behavior: smooth; }
        @media (max-width: 768px) { .tree-view, .guide-view { width: 100%; height: 50%; } }

        .node { margin-bottom: 5px; }
        .label { cursor: pointer; padding: 12px; border-radius: 10px; background: var(--card-bg); border: 1px solid #252525; display: flex; flex-direction: column; position: relative; padding-left: 40px; transition: 0.2s; }
        .label:hover { border-color: var(--gold); background: #222; }
        .label::before { content: 'â–¶'; font-size: 9px; position: absolute; left: 18px; top: 16px; color: var(--gold); transition: 0.2s; }
        .node.expanded > .label::before { transform: rotate(90deg); }
        .node.leaf > .label::before { content: 'â—‹'; color: #444; }
        
        .cn-text { font-weight: bold; font-size: 17px; }
        .en-text { font-size: 11px; color: var(--text-sub); margin-top: 2px; text-transform: uppercase; }
        .children { margin-left: 15px; display: none; border-left: 1px solid #333; padding-left: 10px; margin-top: 5px; }
        .node.expanded > .children { display: block; }
        .highlight { background: #3d3400 !important; border: 2px solid var(--gold) !important; box-shadow: 0 0 15px rgba(212,175,55,0.3); }

        .card { background: #1e1e1e; padding: 18px; border-radius: 12px; margin-bottom: 12px; border-left: 6px solid var(--sop-green); line-height: 1.6; }
        .card.hidden { display: none; }
        .card.search-match { border-color: var(--gold); background: #26210a; }
        .fault-card { border-left-color: var(--danger); background: #241819; }
        .step-tag { background: var(--sop-green); color: black; padding: 1px 8px; border-radius: 4px; margin-right: 8px; font-weight: 900; font-size: 12px; }
        h3 { color: var(--gold); border-bottom: 1px solid #333; padding-bottom: 8px; margin-top: 0; scroll-margin-top: 20px; font-style: italic; }
        .fault-q { color: var(--danger); font-weight: bold; display: block; margin-bottom: 5px; }
    </style>
</head>
<body>

<div class="main-wrapper">
    <header>Panasonic PT-RQ35K æ™ºæ…§æ§åˆ¶å° V21</header>

    <div class="search-area">
        <input type="text" id="searchInput" placeholder="æœå°‹æ„åœ– (ä¾‹ï¼šå‡ºå» ã€è®Šå½¢ã€SDIã€å¯†ç¢¼ã€è®Šæš—...)" oninput="globalSearch()">
        <div class="btn-group">
            <button id="toggleBtn" class="btn btn-toggle" onclick="handleMasterToggle()">ğŸ“‚ å…¨éƒ¨å±•é–‹</button>
            <button class="btn btn-gold" onclick="jumpTo('sopSection')">å®‰è£ SOP</button>
            <button class="btn btn-red" onclick="jumpTo('faultSection')">æ•…éšœæ’é™¤</button>
        </div>
    </div>

    <div class="main-container">
        <div class="tree-view" id="menuTree"></div>
        <div class="guide-view" id="infoDisplay">
            <div id="sopSection">
                <h3>ğŸš€ ç¬¬ä¸€æ¬¡æ“ä½œå®‰è£ SOP</h3>
                <div class="card" data-tags="é›»æº 220V 110V äº®åº¦ é›»å£“"><span class="step-tag">1</span><b>é›»æºç¢ºèª (é‡è¦)</b><br>PT-RQ35K åœ¨ **110V** ä¸‹äº®åº¦æœƒè‡ªå‹•é™è‡³ç´„ **10,000 lm** (1/3)ã€‚è«‹å‹™å¿…ç¢ºèªç¾å ´æä¾› **200-240V** é›»æºä»¥ç™¼æ® 30,500 lm å…¨åŠŸç‡ã€‚</div>
                <div class="card" data-tags="åˆå§‹åŒ– é‚„åŸ å‡ºå»  reset initialize é è¨­"><span class="step-tag">2</span><b>å…¨æ©Ÿé‡è¨­ (Initialize)</b><br>è·¯å¾‘ï¼š[PROJECTOR SETUP] -> [INITIALIZE] -> [ALL USER DATA]ã€‚<br>é€™æœƒæ¸…é™¤æ‰€æœ‰å‰äººçš„å¹¾ä½•ä¿®æ­£ã€èåˆè¨­å®šåŠå¯†ç¢¼ã€‚</div>
                <div class="card" data-tags="é¡é ­ æ ¡æ­£ calibration lens"><span class="step-tag">3</span><b>é¡é ­æ ¡æ­£ (Lens Calibration)</b><br>è·¯å¾‘ï¼š[PROJECTOR SETUP] -> [LENS] -> [LENS CALIBRATION]ã€‚<br>æ¯æ¬¡ç‰©ç†æ€§æ‹†è£æˆ–æ¬é‹å¾Œå¿…åšï¼Œå¦å‰‡ç¸®æ”¾/å°ç„¦é¦¬é”å¯èƒ½åç§»ã€‚</div>
                <div class="card" data-tags="å°ç„¦ ç¸®æ”¾ focus zoom shift"><span class="step-tag">4</span><b>åˆæ­¥å°ä½</b><br>ä½¿ç”¨é™æ§å™¨å¿«é€Ÿéµï¼š[LENS SHIFT] èª¿æ•´ä¸Šä¸‹å·¦å³ï¼Œ[ZOOM] èª¿æ•´å¤§å°ï¼Œ[FOCUS] èª¿æ•´æ¸…æ™°åº¦ã€‚</div>
                <div class="card" data-tags="æ¸¬è©¦åœ–æ¨£ ç¶²æ ¼ pattern grid crosshatch"><span class="step-tag">5</span><b>ç¶²æ ¼æ ¡æ­£</b><br>è·¯å¾‘ï¼š[TEST PATTERN] -> [CROSSHATCH]ã€‚é–‹å•Ÿç¶²æ ¼å¾Œï¼Œæ‰èƒ½é€²è¡Œç²¾ç¢ºçš„å¹¾ä½•ä¿®æ­£ã€‚</div>
            </div>

            <div id="faultSection" style="margin-top: 40px;">
                <h3>âš ï¸ ç°¡æ˜“æ•…éšœæ’é™¤</h3>
                <div class="card fault-card" data-tags="è®Šæš— ä¸å¤ äº® 220V 110V ç¯€èƒ½ quiet eco"><span class="fault-q">Q: ç•«é¢äº®åº¦æ„Ÿè¦ºä¸è¶³ï¼Ÿ</span>1. æª¢æŸ¥ [STATUS] ä¸­çš„è¼¸å…¥é›»å£“æ˜¯å¦ä½æ–¼ 200Vã€‚<br>2. æª¢æŸ¥ [LIGHT OUTPUT] æ˜¯å¦è™•æ–¼ Eco æˆ– Quiet æ¨¡å¼ã€‚</div>
                <div class="card fault-card" data-tags="æ²’è¨Šè™Ÿ é»‘ç•«é¢ sdi hdmi level-a level-b signal"><span class="fault-q">Q: æœ‰æ¥ç·šä½†é¡¯ç¤º No Signalï¼Ÿ</span>1. æª¢æŸ¥ [SIGNAL LIST] è§£æåº¦æ˜¯å¦è®Šç´… (ä¸æ”¯æ´)ã€‚<br>2. è‹¥æ˜¯ SDIï¼Œæ‰‹å‹•åˆ‡æ› [SDI MODE] çš„ Level-A æˆ– Level-B ä»¥é…å°è¨Šè™Ÿæºã€‚</div>
                <div class="card fault-card" data-tags="é¸å–® æ¶ˆå¤± åç° simple normal menu mode"><span class="fault-q">Q: é¸å–®å¾ˆå¤šé …ç›®æ¶ˆå¤±æˆ–ä¸èƒ½é»ï¼Ÿ</span>è·¯å¾‘ï¼š[DISPLAY OPTION] -> [MENU MODE]ã€‚å‹™å¿…åˆ‡æ›ç‚º **NORMAL**ã€‚è¨­ç‚º Simple æœƒé–å®šå°ˆæ¥­åŠŸèƒ½ã€‚</div>
                <div class="card fault-card" data-tags="U12 U13 F10 F20 å ±éŒ¯ è­¦å‘Š ä»£ç¢¼ error code"><span class="fault-q">Q: å‡ºç¾è­¦å‘Šè¨Šæ¯æˆ–éŒ¯èª¤ä»£ç¢¼ï¼Ÿ</span>- U12/U13ï¼šæ¿¾ç¶²é€²æ°£ç•°å¸¸ï¼Œè«‹æ¸…æ½”é€²æ°£å­”ã€‚<br>- F é–‹é ­ä»£ç¢¼ï¼šé›»è·¯ç•°å¸¸ï¼Œè«‹è¨˜éŒ„è™Ÿç¢¼ä¸¦å˜—è©¦é‡æ–°æ–·é›»é‡é–‹ã€‚</div>
            </div>
        </div>
    </div>
</div>

<script>
    // æ¨¡ç³Šæœå°‹åŒç¾©è©æ˜ å°„
    const ALIAS_MAP = {
        "é‚„åŸ": ["åˆå§‹åŒ–", "initialize", "reset", "å‡ºå» ", "é è¨­"],
        "é è¨­": ["åˆå§‹åŒ–", "initialize", "reset", "é‚„åŸ"],
        "å‡ºå» ": ["åˆå§‹åŒ–", "initialize", "reset", "é‚„åŸ"],
        "è®Šå½¢": ["å¹¾ä½•", "geometry", "æ¢¯å½¢", "keystone", "ä¿®æ­£"],
        "è®Šæš—": ["äº®åº¦", "é›»å£“", "light", "output", "eco"],
        "å¯†ç¢¼": ["security", "pin", "é–å®š"],
        "æ­ªäº†": ["å¹¾å’Œ", "ä½ç§»", "æ¢¯å½¢", "grid"],
        "æ²’ç•«é¢": ["è¨Šè™Ÿ", "signal", "sdi", "hdmi", "no signal"]
    };

    // åå¤§é¸å–®å®Œæ•´æ¶æ§‹
    const menuData = [
        { title: "1. PICTURE (å½±åƒå½±åƒ)", tags: "äº®åº¦ å°æ¯” ç•«è³ª æ¨¡å¼", children: [
            { title: "PICTURE MODE (å½±åƒæ¨¡å¼)" },
            { title: "CONTRAST / BRIGHTNESS (å°æ¯”/äº®åº¦)" },
            { title: "COLOR / TINT (è‰²å½©/è‰²èª¿)" },
            { title: "WHITE BALANCE (ç™½å¹³è¡¡)" },
            { title: "DYNAMIC CONTRAST (å‹•æ…‹å°æ¯”)" }
        ]},
        { title: "2. POSITION (ä½ç½®è¨­å®š)", tags: "ç¸®æ”¾ ä½ç§» æ¯”ä¾‹ å¹¾ä½•", children: [
            { title: "SHIFT (ä½ç§»)" },
            { title: "ASPECT (é•·å¯¬æ¯”)" },
            { title: "ZOOM (ç¸®æ”¾)" },
            { title: "GEOMETRY (å¹¾ä½•æ ¡æ­£)", children: [
                { title: "KEYSTONE (æ¢¯å½¢ä¿®æ­£)" },
                { title: "CORNER CORRECTION (å››è§’ä¿®æ­£)" },
                { title: "CURVED CORRECTION (æ›²é¢ä¿®æ­£)" },
                { title: "FREE GRID (è‡ªç”±æ ¼é»)" }
            ]}
        ]},
        { title: "3. ADVANCED MENU (é€²éšé¸å–®)", tags: "èåˆ æ‹¼æ¥ å¤šæ©Ÿ åŒ¹é…", children: [
            { title: "EDGE BLENDING (é‚Šç·£èåˆ)" },
            { title: "COLOR MATCHING (è‰²å½©åŒ¹é…)" },
            { title: "MULTI-SCREEN (å¤šæ©Ÿç•«é¢è¨­å®š)" }
        ]},
        { title: "4. DISPLAY LANGUAGE (é¡¯ç¤ºèªè¨€)", tags: "ç¹é«” ä¸­æ–‡ èªè¨€", children: [{ title: "èªè¨€é¸æ“‡ (CHINESE/ENGLISH...)" }] },
        { title: "5. DISPLAY OPTION (é¡¯ç¤ºé¸é …)", tags: "é¸å–®æ¨¡å¼ é¸å–®ä½ç½® èƒŒæ™¯", children: [
            { title: "ON-SCREEN DISPLAY (è¢å¹•é¡¯ç¤ºè¨­å®š)" },
            { title: "MENU MODE (é¸å–®æ¨¡å¼)", tags: "SIMPLE NORMAL" },
            { title: "MENU POSITION (é¸å–®ä½ç½®)" }
        ]},
        { title: "6. PROJECTOR SETUP (æŠ•å½±æ©Ÿè¨­å®š)", tags: "é‚„åŸ åˆå§‹åŒ– ç‹€æ…‹ é›»å£“ æ¿¾ç¶² é¡é ­", children: [
            { title: "PROJECTOR ID (æŠ•å½±æ©Ÿ ID)" },
            { title: "LENS (é¡é ­è¨­å®š)", children: [
                { title: "LENS CALIBRATION (é¡é ­æ ¡æ­£)" },
                { title: "ACTIVE FOCUS OPTIMIZER (å°ç„¦å„ªåŒ–)" }
            ]},
            { title: "STATUS (ç‹€æ…‹è³‡è¨Š)", tags: "é›»å£“ åºè™Ÿ æº«åº¦ é‹è¡Œæ™‚é–“" },
            { title: "INITIALIZE (åˆå§‹åŒ–)", tags: "é‚„åŸ å‡ºå»  é‡è¨­ reset" },
            { title: "OPERATION SETTING (é‹è¡Œæ¨¡å¼)" }
        ]},
        { title: "7. TEST PATTERN (æ¸¬è©¦åœ–æ¨£)", tags: "ç¶²æ ¼ æ ¼å­ æ¸¬è©¦ç•«é¢", children: [
            { title: "INTERNAL TEST PATTERN (å…§éƒ¨åœ–æ¨£)" },
            { title: "PATTERN SETTING (åœ–æ¨£è¨­å®š)" }
        ]},
        { title: "8. SIGNAL LIST (è¨Šè™Ÿåˆ—è¡¨)", tags: "æ ¼å¼ SDI HDMI æ²’è¨Šè™Ÿ", children: [
            { title: "SIGNAL LIST (æ‰€æœ‰è¨Šè™Ÿ)" },
            { title: "SIGNAL INFO (ç•¶å‰è³‡è¨Š)" },
            { title: "SDI IN SETTING (SDI æ¨¡å¼)", children: [{ title: "SDI MODE (LEVEL A/B)" }] }
        ]},
        { title: "9. SECURITY (å®‰å…¨æ€§)", tags: "å¯†ç¢¼ é–å®š PIN", children: [
            { title: "PIN CODE CHANGE (PINç¢¼è®Šæ›´)" },
            { title: "SECURITY LOCK (å®‰å…¨æ€§é–å®š)" }
        ]},
        { title: "10. NETWORK (ç¶²è·¯è¨­å®š)", tags: "IP LAN æœ‰ç·š é ç«¯æ§åˆ¶", children: [
            { title: "WIRED LAN (æœ‰ç·šç¶²è·¯)" },
            { title: "ADMINISTRATOR ACCOUNT (ç®¡ç†å“¡å¸³è™Ÿ)" },
            { title: "NETWORK STATUS (ç¶²è·¯ç‹€æ…‹)" }
        ]}
    ];

    let isAllExpanded = false;

    function globalSearch() {
        let input = document.getElementById('searchInput').value.toLowerCase().trim();
        const labels = document.querySelectorAll('.label');
        const cards = document.querySelectorAll('.card');
        
        if (!input) {
            labels.forEach(l => l.classList.remove('highlight'));
            cards.forEach(c => c.classList.remove('hidden', 'search-match'));
            return;
        }

        // æ§‹å»ºæœå°‹é—œéµå­—çµ„ (åŒ…å«è¼¸å…¥è©åŠå…¶åŒç¾©è©)
        let keywords = [input];
        for (let key in ALIAS_MAP) {
            if (key.includes(input) || input.includes(key)) {
                keywords = [...keywords, ...ALIAS_MAP[key]];
            }
        }

        let firstMatch = null;

        // é¸å–®æ¨¹æœå°‹
        labels.forEach(l => {
            const tagsAttr = (l.getAttribute('data-tags') || "").toLowerCase();
            const labelText = l.innerText.toLowerCase();
            const isHit = keywords.some(k => tagsAttr.includes(k) || labelText.includes(k));

            if (isHit) {
                l.classList.add('highlight');
                if (!firstMatch) firstMatch = l;
                let p = l.parentElement;
                while (p && p.classList.contains('node')) { p.classList.add('expanded'); p = p.parentElement.parentElement; }
            } else {
                l.classList.remove('highlight');
            }
        });

        if (firstMatch) firstMatch.scrollIntoView({ behavior: 'smooth', block: 'center' });

        // SOP/æ•…éšœå¡ç‰‡æœå°‹
        cards.forEach(c => {
            const cTags = (c.getAttribute('data-tags') || "").toLowerCase();
            const cText = c.innerText.toLowerCase();
            const isHit = keywords.some(k => cTags.includes(k) || cText.includes(k));
            
            if (isHit) {
                c.classList.remove('hidden');
                c.classList.add('search-match');
            } else {
                c.classList.add('hidden');
                c.classList.remove('search-match');
            }
        });
    }

    function jumpTo(id) {
        const element = document.getElementById(id);
        const container = document.getElementById('infoDisplay');
        document.getElementById('searchInput').value = "";
        globalSearch(); 
        if(window.innerWidth <= 768) {
            const offset = element.offsetTop + 200;
            container.scrollTo({ top: offset, behavior: 'smooth' });
        } else {
            container.scrollTo({ top: element.offsetTop - 10, behavior: 'smooth' });
        }
    }

    function handleMasterToggle() {
        isAllExpanded = !isAllExpanded;
        document.querySelectorAll('.node').forEach(n => isAllExpanded ? n.classList.add('expanded') : n.classList.remove('expanded'));
        document.getElementById('toggleBtn').innerHTML = isAllExpanded ? "ğŸ“ å…¨éƒ¨æ”¶åˆ" : "ğŸ“‚ å…¨éƒ¨å±•é–‹";
    }

    function draw(data, parent, level = 0) {
        data.forEach(item => {
            const node = document.createElement('div');
            node.className = `node level-${level} ${item.children ? '' : 'leaf'}`;
            const label = document.createElement('div');
            label.className = 'label';
            const split = item.title.split(' (');
            label.innerHTML = `<span class="cn-text">${split[0]}</span><span class="en-text">${split[1] ? '(' + split[1] : ''}</span>`;
            
            // å¯«å…¥æœå°‹æ¨™ç±¤
            label.setAttribute('data-tags', `${item.title} ${item.tags || ''}`);
            
            label.onclick = (e) => { e.stopPropagation(); node.classList.toggle('expanded'); if(!node.classList.contains('expanded')) isAllExpanded = false; };
            node.appendChild(label);
            if (item.children) {
                const childWrap = document.createElement('div');
                childWrap.className = 'children';
                draw(item.children, childWrap, level + 1);
                node.appendChild(childWrap);
            }
            parent.appendChild(node);
        });
    }
    draw(menuData, document.getElementById('menuTree'));
</script>
</body>
</html>
