<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PT-RQ35K æ™ºæ…§å°è¦½ V38</title>
    <style>
        :root { 
            --navy-dark: #050505; --card-bg: #1a1a1a; --gold: #d4af37; 
            --text-main: #ffffff; --text-sub: #d1d1d1; --active-blue: #007aff; --sop-green: #28cd41; --danger: #ff3b30;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        /* è§£æ±ºæ‰‹æ©Ÿå°è¦½åˆ—é®æ“‹ï¼šä½¿ç”¨ svh ä¸¦ç¢ºä¿ä½ˆå±€å¡«æ»¿ */
        html, body { 
            background: var(--navy-dark); 
            margin: 0; padding: 0; 
            color: var(--text-main); 
            font-family: "Inter", "PingFang TC", "Microsoft JhengHei", sans-serif; 
            height: 100vh; height: 100svh; 
            overflow: hidden; 
        }

        .main-wrapper { width: 100%; height: 100%; display: flex; flex-direction: column; }
        header { background: #000; color: var(--gold); padding: 10px; text-align: center; border-bottom: 2px solid var(--gold); flex-shrink: 0; font-weight: 900; letter-spacing: 2px; font-size: 13px; }
        
        .top-fixed-area { background: #111; border-bottom: 1px solid #222; flex-shrink: 0; z-index: 1000; }
        .search-container { padding: 12px 15px 8px 15px; position: relative; display: flex; align-items: center; }
        #searchInput { width: 100%; padding: 14px 45px 14px 14px; border-radius: 10px; border: 1px solid #444; background: #222; color: white; font-size: 16px; outline: none; transition: 0.3s; }
        .clear-btn { position: absolute; right: 25px; width: 24px; height: 24px; background: #444; color: #fff; border-radius: 50%; border: none; cursor: pointer; display: none; align-items: center; justify-content: center; font-size: 14px; font-weight: bold; }
        .clear-btn.active { display: flex; }

        .tab-group { display: flex; gap: 5px; padding: 0 15px 12px 15px; }
        .tab-btn { flex: 1; padding: 10px 5px; border-radius: 8px; border: 1px solid #333; background: #1a1a1a; color: #888; cursor: pointer; font-weight: bold; font-size: 14px; }
        .tab-btn.active { background: var(--active-blue); color: white; border-color: var(--active-blue); }
        .tab-btn.gold.active { background: var(--gold); color: black; border-color: var(--gold); }
        .tab-btn.red.active { background: var(--danger); color: white; border-color: var(--danger); }

        /* å…§å®¹å€å¢åŠ åº•éƒ¨é–“è·é˜²æ­¢é®æ“‹ */
        .content-container { 
            flex: 1; 
            overflow-y: auto; 
            padding: 12px 12px 100px 12px; 
            scroll-behavior: smooth; 
            -webkit-overflow-scrolling: touch;
        }
        .view-section { display: none; width: 100%; }
        .view-section.active { display: block; }

        .node { margin-bottom: 8px; width: 100%; }
        .label { cursor: pointer; padding: 15px 12px 15px 42px; border-radius: 12px; background: var(--card-bg); border: 1px solid #2a2a2a; display: flex; align-items: center; position: relative; }
        .label::before { content: 'â–¶'; font-size: 9px; position: absolute; left: 18px; color: var(--gold); }
        .node.expanded > .label::before { transform: rotate(90deg); }
        .node.leaf > .label::before { content: 'â—‹'; color: #666; }
        
        .en-text { font-weight: 900; font-size: 16px; color: #fff; margin-right: 8px; }
        .cn-text { font-weight: 300; font-size: 16px; color: var(--text-sub); } 
        
        .options-box { margin: 8px 0 8px 30px; background: #000; border: 1px dashed #444; border-radius: 10px; padding: 12px; display: none; }
        .node.expanded > .options-box { display: block; }
        .option-item { color: #aaa; font-size: 14px; margin-bottom: 4px; display: flex; align-items: center; }
        .option-item::before { content: 'â€¢'; color: var(--gold); margin-right: 8px; }

        .children { margin-left: 18px; display: none; border-left: 2px solid #333; padding-left: 12px; margin-top: 8px; }
        .node.expanded > .children { display: block; }
        .highlight { background: #3d3400 !important; border: 1.5px solid var(--gold) !important; box-shadow: 0 0 15px rgba(212,175,55,0.3); }

        .card { background: #1a1a1a; padding: 18px; border-radius: 15px; margin-bottom: 12px; border-left: 6px solid var(--sop-green); line-height: 1.6; font-size: 15px; border-top: 1px solid #333; }
        .fault-card { border-left-color: var(--danger); background: #201516; }
        .step-tag { background: var(--sop-green); color: black; padding: 2px 8px; border-radius: 5px; margin-right: 10px; font-weight: 900; font-size: 11px; }
        h3 { color: var(--gold); border-bottom: 1px solid #333; padding-bottom: 10px; margin-top: 0; font-size: 19px; font-style: italic; }
        .fault-q { color: var(--danger); font-weight: 900; display: block; margin-bottom: 8px; font-size: 16px; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="main-wrapper">
    <header>PT-RQ35K æ™ºæ…§å°è¦½ V3.8</header>

    <div class="top-fixed-area">
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="æœå°‹é—œéµå­— (æ­ªäº†ã€æ¨¡ç³Šã€é»‘ç•«é¢ã€220V...)" oninput="globalSearch()">
            <button id="clearSearch" class="clear-btn" onclick="clearInput()">âœ•</button>
        </div>
        <div class="tab-group">
            <button id="btn-tree" class="tab-btn active" onclick="handleTreeTabClick()">é¸å–®ä¸»é </button>
            <button id="btn-sop" class="tab-btn gold" onclick="switchView('sop')">å®‰è£ SOP</button>
            <button id="btn-fault" class="tab-btn red" onclick="switchView('fault')">æ•…éšœæ’é™¤</button>
        </div>
    </div>

    <div class="content-container" id="scrollTarget">
        <section id="treeSection" class="view-section active">
            <div id="menuTree"></div>
        </section>

        <section id="sopSection" class="view-section">
            <h3>ğŸš€ å®‰è£èˆ‡åˆæ¬¡ä½¿ç”¨æŒ‡å— [cite: 6]</h3>
            <div class="card" data-tags="é¡é ­ å®‰è£ lens ç‰©ç† é–ç·Š å®‰å…¨ é›»æº"><span class="step-tag">1</span><b>é¡é ­å®‰è£å®‰å…¨å®ˆå‰‡</b><br>æ›´æ›é¡é ­å‰å¿…é ˆ<b>é—œé–‰ä¸»é›»æº</b> [cite: 6]ã€‚ç§»é™¤å­”è“‹å¾Œæ’å…¥ä¸¦é †æ™‚é‡æ—‹è‡³ã€Œå–€åš“ã€è²ï¼Œå‹™å¿…é–ç·Š<b>é˜²å€’è½èºçµ²</b> [cite: 6]ã€‚</div>
            <div class="card" data-tags="é›»æº 220V 110V äº®åº¦ é›»å£“ è®Šæš— åŠŸç‡"><span class="step-tag">2</span><b>é›»æºé›»å£“èˆ‡äº®åº¦é™åˆ¶</b><br>ä½¿ç”¨ AC 100-120V æ™‚äº®åº¦æœƒé™ä½è‡³ç´„ 1/3 (10,000 lm) [cite: 3, 6]ã€‚å…¨äº®åº¦ 30,500 lm éœ€æ¥ <b>AC 200-240V</b> [cite: 3, 6]ã€‚</div>
            <div class="card" data-tags="è¨­å‚™ é€£æ¥ é †åº è¨Šè™Ÿç·š"><span class="step-tag">3</span><b>è¨­å‚™é€£æ¥é †åº</b><br>æ‡‰åœ¨é›»æºé—œé–‰ä¸‹å®Œæˆé€£ç·š [cite: 6]ã€‚é–‹æ©Ÿé †åºï¼šå¤–éƒ¨è¨­å‚™ -> æŠ•å½±æ©Ÿä¸»é–‹é—œ -> å¾…æ©Ÿéµ [cite: 6]ã€‚</div>
            <div class="card" data-tags="æ­¸ä½ shift home ä¸­å¿ƒ åŸé» æ¯”ä¾‹ å¤§å°"><span class="step-tag">4</span><b>åˆæ­¥å°ä½æ­¸ä½</b><br>èª¿æ•´å¹¾ä½•å‰ï¼Œæ‡‰å…ˆå°‡ [LENS SHIFT] ç§»å‹•è‡³<b>æ­¸ä½ä¸­å¿ƒ (Home Position)</b> [cite: 6]ï¼Œå†é€²è¡Œç¸®æ”¾èˆ‡å°ç„¦ã€‚</div>
            <div class="card" data-tags="åˆå§‹åŒ– é‚„åŸ å‡ºå»  reset initialize å¹¾ä½• èåˆ"><span class="step-tag">5</span><b>å…¨æ©Ÿé‡ç½® (Initialize)</b><br>è·¯å¾‘ï¼š[PROJECTOR SETUP] -> [INITIALIZE] -> [ALL USER DATA] [cite: 1, 6]ã€‚å‹™å¿…æ¸…é™¤å‰å ´æ´»å‹•çš„æ®˜ç•™è¨­å®šã€‚</div>
            <div class="card" data-tags="é¡é ­ æ ¡æ­£ calibration é¦¬é” ç•°å¸¸ æ¨¡ç³Š"><span class="step-tag">6</span><b>åŸ·è¡Œé¡é ­é¦¬é”æ ¡æ­£</b><br>è·¯å¾‘ï¼š[PROJECTOR SETUP] -> [LENS] -> [LENS CALIBRATION] [cite: 1, 6]ã€‚æ›´æ›æˆ–æ¬é‹å¾Œå¿…åšå‹•ä½œã€‚</div>
        </section>

        <section id="faultSection" class="view-section">
            <h3>âš ï¸ æ•…éšœæ’é™¤è¨ºæ–· [cite: 1, 3]</h3>
            <div class="card fault-card" data-tags="è§£æåº¦ ä¸æ”¯æ´ ç´…è‰² invalid é»‘ç•«é¢ 4K 2K é »ç‡"><span class="fault-q">Q: ç„¡è¨Šè™Ÿæˆ–é¡¯ç¤º Invalid Format (è§£æåº¦å•é¡Œ)ï¼Ÿ</span>1. é€²å…¥ [SIGNAL LIST]ï¼Œè‹¥è©²è¨Šè™Ÿæ¨™ç¤ºç‚º<b>ç´…è‰²</b>ä»£è¡¨é »ç‡ä¸æ”¯æ´ã€‚<br>2. å˜—è©¦å°‡ [HDMI EDID] å¾ 4K åˆ‡æ›è‡³ 2K æ¸¬è©¦ã€‚</div>
            <div class="card fault-card" data-tags="è®Šæš— äº®åº¦ æº«åº¦ é«˜æµ·æ‹” 25åº¦ 35åº¦ æ†å®š æ•£ç†±"><span class="fault-q">Q: ç•«é¢äº®åº¦ç•°å¸¸è®Šæš—ï¼Ÿ</span>1. <b>é›»å£“</b>ï¼šç¢ºèªæ˜¯å¦èª¤æ¥ 110V [cite: 3]ã€‚<br>2. <b>ç’°å¢ƒä¿è­·</b>ï¼šæº«åº¦ >35Â°C (é«˜æµ·æ‹” >25Â°C) ç³»çµ±æœƒå¼·åˆ¶é™åŠŸç‡ [cite: 3]ã€‚<br>3. <b>æ†å®šæ¨¡å¼</b>ï¼šæª¢æŸ¥ [CONSTANT MODE] æ˜¯å¦é–‹å•Ÿ [cite: 3]ã€‚</div>
            <div class="card fault-card" data-tags="æŒ‡ç¤ºç‡ˆ å¿«é–€ ç¶ ç‡ˆ æ…¢é–ƒ shutter æš«æ™‚é—œé–‰ 2ç§’"><span class="fault-q">Q: ç•«é¢è®Šé»‘ä½†æœ‰ç¶ ç‡ˆæ…¢é–ƒï¼Ÿ</span>å¿«é–€ [SHUTTER] å·²å•Ÿå‹• [cite: 3]ã€‚æŒ‡ç¤ºç‡ˆæœƒå‘ˆ<b>ç¶ è‰² 2 ç§’é€±æœŸæ…¢é–ƒ</b>ã€‚æŒ‰é™æ§å™¨å¿«é–€éµå›å¾©ã€‚</div>
            <div class="card fault-card" data-tags="ç´…ç‡ˆ é•·äº® æ•…éšœ å…‰æº é¢¨æ‰‡ U12 U13"><span class="fault-q">Q: æŒ‡ç¤ºç‡ˆé¡è‰²èˆ‡ä»£ç¢¼è¨ºæ–·ï¼Ÿ</span>1. **ç´…ç‡ˆé•·äº®**ï¼šéƒ¨åˆ†é›·å°„å–®å…ƒæ•…éšœ [cite: 1, 3]ã€‚<br>2. **U12/U13**ï¼šé€²æ°£(12)æˆ–æ’æ°£(13)å£æº«åº¦ç•°å¸¸ [cite: 1]ã€‚<br>3. **ç´…ç‡ˆå¿«é–ƒ**ï¼šç¡¬é«”æˆ–é¢¨æ‰‡éŒ¯èª¤ (Fç³»åˆ—ä»£ç¢¼) [cite: 1]ã€‚</div>
        </section>
    </div>
</div>

<script>
    const ALIAS_MAP = {
        "é‚„åŸ": ["initialize", "reset", "åˆå§‹åŒ–", "å‡ºå» ", "é è¨­"],
        "è§£æåº¦": ["signal", "format", "edid", "è§£æåº¦", "ä¸æ”¯æ´", "ç´…è‰²", "é»‘ç•«é¢", "é »ç‡"],
        "æ‰­æ›²": ["geometry", "keystone", "å¹¾ä½•", "æ¢¯å½¢", "ä¿®æ­£", "æ­ªäº†", "æ–œäº†", "grid"],
        "å¤§å°": ["zoom", "aspect", "æ¯”ä¾‹", "å°ºå¯¸", "å¤§å°", "æ­¸ä½", "home"],
        "è®Šæš—": ["brightness", "light", "é›»å£“", "110v", "220v", "eco", "quiet", "äº®åº¦", "æº«åº¦", "é«˜æµ·æ‹”", "æ†å®š"],
        "å°ç„¦": ["focus", "lens", "æ ¡æ­£", "é¦¬é”", "æ¨¡ç³Š"],
        "å¿«é–€": ["shutter", "ç¶ ç‡ˆ", "æ…¢é–ƒ", "é»‘ç•«é¢"],
        "ç‡ˆè™Ÿ": ["indicator", "ç´…ç‡ˆ", "æŒ‡ç¤ºç‡ˆ", "æ•…éšœ", "é–ƒçˆ", "u12", "u13", "f10"]
    };

    const menuData = [
        { en: "1. PICTURE", cn: "å½±åƒé¸å–®", children: [
            { en: "PICTURE MODE", cn: "å½±åƒæ¨¡å¼", options: ["STANDARD (æ¨™æº–)", "CINEMA (é›»å½±)", "NATURAL (è‡ªç„¶)", "GRAPHIC (åœ–å½¢)"] },
            { en: "CONTRAST / BRIGHTNESS", cn: "å°æ¯”èˆ‡äº®åº¦", options: ["Contrast (å°æ¯”: -30 ~ +30)", "Brightness (äº®åº¦: -30 ~ +30)"] },
            { en: "DYNAMIC CONTRAST", cn: "å‹•æ…‹å°æ¯”", options: ["OFF", "1 / 2 / 3", "LIGHTS OUT (åµæ¸¬å…¨é»‘æ™‚é—œç‡ˆ)"] },
            { en: "OPERATING MODE", cn: "é‹ä½œæ¨¡å¼", options: ["NORMAL (ä¸€èˆ¬å…¨äº®)", "ECO (ç¯€èƒ½é•·å£½)", "QUIET (éœéŸ³)"] }
        ]},
        { en: "2. POSITION", cn: "ä½ç½®è¨­å®š", children: [
            { en: "SHIFT", cn: "é¡é ­ä½ç§»", options: ["Vertical Shift (å‚ç›´)", "Horizontal Shift (æ°´å¹³)", "Home Position (æ­¸ä½ä¸­å¿ƒ)"] },
            { en: "ASPECT", cn: "é•·å¯¬æ¯”è¨­å®š (æ¯”ä¾‹/å°ºå¯¸)", options: ["AUTO (è‡ªå‹•)", "4:3 / 16:9", "THROUGH (é»å°é»)"] },
            { en: "ZOOM / FOCUS", cn: "ç¸®æ”¾èˆ‡å°ç„¦ (å¤§å°/æ¨¡ç³Š)", options: ["Optical Zoom (å…‰å­¸å¤§å°)", "Digital Zoom (æ•¸ä½ç¸®æ”¾)", "Focus (å°ç„¦)"] },
            { en: "GEOMETRY", cn: "å¹¾ä½•æ ¡æ­£ (æ‰­æ›²ä¿®æ­£)", children: [
                { en: "KEYSTONE", cn: "æ¢¯å½¢ä¿®æ­£", options: ["H-Keystone (æ°´å¹³)", "V-Keystone (å‚ç›´)"] },
                { en: "CORNER CORRECTION", cn: "å››è§’ä¿®æ­£", options: ["å››é»ç¨ç«‹åº§æ¨™èª¿æ•´"] },
                { en: "FREE GRID", cn: "è‡ªç”±æ ¼é»æ ¡æ­£", options: ["2x2 ~ 16x16 é»ä½ç´°èª¿"] }
            ]}
        ]},
        { en: "3. ADVANCED MENU", cn: "é€²éšèåˆ", children: [
            { en: "EDGE BLENDING", cn: "é‚Šç·£èåˆ", options: ["Marker (æ¨™è¨˜)", "Edges Width (å¯¬åº¦èª¿æ•´)", "Black Level (é»‘éšè£œå„Ÿ)"] },
            { en: "COLOR MATCHING", cn: "è‰²å½©åŒ¹é…", options: ["3-Colors / 7-Colors", "Measured (å¯¦æ¸¬å€¼)"] }
        ]},
        { en: "4. DISPLAY LANGUAGE", cn: "èªç³»é¸æ“‡", options: ["English", "ç¹é«”ä¸­æ–‡", "æ—¥æœ¬èª"] },
        { en: "5. DISPLAY OPTION", cn: "é¡¯ç¤ºé¸é …", children: [
            { en: "MENU MODE", cn: "é¸å–®æ¨¡å¼", options: ["NORMAL (å®Œæ•´æ¨¡å¼)", "SIMPLE (ç²¾ç°¡æ¨¡å¼)"] },
            { en: "MENU POSITION", cn: "é¸å–®ä½ç½®", options: ["Center (ç½®ä¸­)", "Upper Left (å·¦ä¸Š)..."] }
        ]},
        { en: "6. PROJECTOR SETUP", cn: "æŠ•å½±æ©Ÿè¨­å®š", children: [
            { en: "LENS", cn: "é¡é ­è¨­å®š", children: [
                { en: "LENS CALIBRATION", cn: "é¡é ­æ ¡æ­£ (æ¨¡ç³Š/æ­¸ä½)", options: ["Execute (åŸ·è¡Œæ ¡æ­£)"] },
                { en: "ACTIVE FOCUS OPTIMIZER", cn: "ä¸»å‹•å°ç„¦å„ªåŒ– (æ”¹å–„æ¨¡ç³Š)", options: ["ON / OFF"] }
            ]},
            { en: "INITIALIZE", cn: "åˆå§‹åŒ– (å…¨æ©Ÿé‡ç½®/é‚„åŸ)", children: [
                { en: "ALL USER DATA", cn: "å…¨ä½¿ç”¨è€…è³‡æ–™é‡ç½® (é‚„åŸå‡ºå» )", options: ["æŠ¹é™¤å¹¾ä½•ã€é¡è‰²ã€èåˆè¨­å®š"] }
            ]},
            { en: "STATUS", cn: "æ©Ÿèº«ç‹€æ…‹è³‡è¨Š (è¨ºæ–·)", options: ["Input Voltage (è¼¸å…¥é›»å£“)", "Intake Temp (é€²æ°£æº«åº¦)", "Runtime (é‹è¡Œæ™‚é–“)", "Light Output (å…‰è¼¸å‡º%)", "Constant Mode (æ†å®šç‹€æ…‹)"] }
        ]},
        { en: "7. TEST PATTERN", cn: "æ¸¬è©¦åœ–æ¨£", children: [
            { en: "INTERNAL TEST PATTERN", cn: "å…§å»ºæ¸¬è©¦åœ–æ¨£", options: ["CROSSHATCH (ç¶²æ ¼)", "WHITE (ç™½)", "COLOR BAR (å½©æ¢)"] }
        ]},
        { en: "8. SIGNAL LIST", cn: "è¨Šè™Ÿæ¸…å–® (ç„¡è¨Šè™Ÿ/è§£æåº¦è¨ºæ–·)", children: [
            { en: "SIGNAL LIST", cn: "å¯ç”¨è¨Šè™Ÿæ¸…å–® (æª¢æŸ¥ç´…è‰²ä¸æ”¯æ´é …ç›®)", options: ["é¡¯ç¤ºæ’æ§½æ‰€æœ‰æ ¼å¼"] },
            { en: "SDI IN SETTING", cn: "SDI è¼¸å…¥è¨­å®š", options: ["SDI MODE: Level A / B"] },
            { en: "HDMI EDID", cn: "HDMI ç›¸å®¹æ€§ (EDID)", options: ["4K (æ¨™æº–)", "2K (è§£æ±ºé»‘ç•«é¢/Invalid Format)"] }
        ]},
        { en: "9. SECURITY", cn: "å®‰å…¨æ€§è¨­å®š (å¯†ç¢¼)", children: [
            { en: "PIN CODE CHANGE", cn: "PIN ç¢¼è®Šæ›´", options: ["è¨­å®šé–‹æ©Ÿå¯†ç¢¼"] },
            { en: "SECURITY LOCK", cn: "å®‰å…¨æ€§é–å®š", options: ["ON / OFF"] }
        ]},
        { en: "10. NETWORK", cn: "ç¶²è·¯è¨­å®š", options: ["WIRED LAN (æœ‰ç·šç¶²è·¯)", "WEB CONTROL (ç¶²é æ§åˆ¶ ON/OFF)", "ADMIN ACCOUNT (ç®¡ç†å“¡å¯†ç¢¼)"] }
    ];

    let treeExpanded = false;
    function handleTreeTabClick() {
        if (!document.getElementById('treeSection').classList.contains('active')) {
            switchView('tree');
        } else {
            treeExpanded = !treeExpanded;
            handleMasterToggle(treeExpanded);
        }
    }

    function switchView(view) {
        document.querySelectorAll('.view-section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(view + 'Section').classList.add('active');
        document.getElementById('btn-' + view).classList.add('active');
        document.getElementById('scrollTarget').scrollTop = 0;
    }

    function globalSearch() {
        let input = document.getElementById('searchInput').value.toLowerCase().trim();
        const labels = document.querySelectorAll('.label');
        const cards = document.querySelectorAll('.card');
        document.getElementById('clearSearch').classList.toggle('active', input !== "");

        if (!input) {
            labels.forEach(l => l.classList.remove('highlight'));
            cards.forEach(c => c.classList.remove('hidden'));
            return;
        }

        let keywords = [input];
        for (let key in ALIAS_MAP) {
            if (key.includes(input) || input.includes(key)) keywords = [...keywords, ...ALIAS_MAP[key]];
        }

        let firstMatch = null;
        labels.forEach(l => {
            const isHit = keywords.some(k => l.innerText.toLowerCase().includes(k));
            if (isHit) {
                l.classList.add('highlight');
                if (!firstMatch) firstMatch = l;
                let p = l.parentElement;
                while (p && p.classList.contains('node')) { p.classList.add('expanded'); p = p.parentElement.parentElement; }
            } else { l.classList.remove('highlight'); }
        });

        cards.forEach(c => {
            const content = (c.innerText + (c.getAttribute('data-tags')||'')).toLowerCase();
            const isHit = keywords.some(k => content.includes(k));
            c.classList.toggle('hidden', !isHit);
        });

        if (firstMatch) firstMatch.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    function clearInput() { document.getElementById('searchInput').value = ""; globalSearch(); }
    function handleMasterToggle(expand) { document.querySelectorAll('.node').forEach(n => expand ? n.classList.add('expanded') : n.classList.remove('expanded')); }
    
    function draw(data, parent, level = 0) {
        data.forEach(item => {
            const node = document.createElement('div');
            node.className = `node level-${level} ${item.children ? '' : 'leaf'}`;
            const label = document.createElement('div');
            label.className = 'label';
            label.innerHTML = `<span class="en-text">${item.en}</span><span class="cn-text">${item.cn}</span>`;
            label.onclick = (e) => { e.stopPropagation(); node.classList.toggle('expanded'); };
            node.appendChild(label);
            if (item.options) {
                const optBox = document.createElement('div');
                optBox.className = 'options-box';
                item.options.forEach(opt => {
                    const d = document.createElement('div');
                    d.className = 'option-item';
                    d.innerText = opt;
                    optBox.appendChild(d);
                });
                node.appendChild(optBox);
            }
            if (item.children) {
                const childWrap = document.createElement('div');
                childWrap.className = 'children';
                draw(item.children, childWrap, level + 1);
                node.appendChild(childWrap);
            }
            parent.appendChild(node);
        });
    }
    draw(menuData, document.getElementById('menuTree'));
</script>
</body>
</html>
