<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PT-RQ35K æ™ºæ…§å°è¦½åŠ©æ‰‹ V18 - Fixes</title>
    <style>
        :root { 
            --navy-dark: #121212; --card-bg: #1e1e1e; --gold: #d4af37; 
            --text-main: #ffffff; --text-sub: #b0b0b0; --danger: #cf6679; --active-blue: #0050b3; --sop-green: #4caf50;
        }
        
        * { box-sizing: border-box; }
        html, body { background: var(--navy-dark); margin: 0; padding: 0; color: var(--text-main); font-family: "PingFang TC", "Microsoft JhengHei", sans-serif; overflow-x: hidden; }

        /* RWD æ¯”ä¾‹æ§åˆ¶ (é›»è…¦ 100% / æ‰‹æ©Ÿ 80%) */
        .main-wrapper { width: 100%; display: flex; flex-direction: column; min-height: 100vh; }
        @media (max-width: 768px) {
            .main-wrapper { transform: scale(0.8); transform-origin: top left; width: 125%; height: 125%; }
        }

        header { background: #000; color: var(--gold); padding: 15px; text-align: center; border-bottom: 2px solid var(--gold); flex-shrink: 0; }
        .search-area { background: #222; padding: 15px; border-bottom: 1px solid #444; flex-shrink: 0; position: sticky; top: 0; z-index: 1000; }
        #searchInput { width: 100%; padding: 14px; border-radius: 8px; border: 1px solid #444; background: #333; color: white; font-size: 20px; outline: none; margin-bottom: 12px; }
        
        .btn-group { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; }
        .btn { padding: 12px 16px; border-radius: 6px; border: none; cursor: pointer; font-weight: bold; font-size: 16px; transition: 0.3s; color: white; }
        .btn-toggle { background: var(--active-blue); min-width: 130px; }
        .btn-gold { background: var(--gold); color: #000; }
        .btn-red { background: var(--danger); }

        .main-container { display: flex; flex: 1; flex-direction: row; overflow: hidden; }
        @media (max-width: 768px) {
            .main-container { flex-direction: column; overflow: visible; height: auto; }
            .tree-view, .guide-view { width: 100% !important; height: auto !important; overflow: visible !important; border-right: none !important; }
        }

        .tree-view { width: 50%; overflow-y: auto; padding: 20px; border-right: 1px solid #333; }
        .guide-view { width: 50%; overflow-y: auto; padding: 25px; background: #181818; scroll-behavior: smooth; }

        /* Tree UI Styles */
        .node { margin-bottom: 8px; }
        .label { cursor: pointer; padding: 12px; border-radius: 8px; display: flex; flex-direction: column; background: var(--card-bg); border: 1px solid #333; transition: 0.2s; position: relative; padding-left: 45px; }
        .label:hover { background: #2c2c2c; border-color: var(--gold); }
        .label::before { content: 'â–¶'; font-size: 12px; position: absolute; left: 18px; top: 15px; color: var(--gold); transition: 0.3s; }
        .node.expanded > .label::before { transform: rotate(90deg); }
        .node.leaf > .label::before { content: 'â—‹'; color: #555; transform: none; }
        .cn-text { font-weight: bold; font-size: 19px; }
        .en-text { font-size: 13px; color: var(--text-sub); margin-top: 4px; }
        .children { margin-left: 15px; display: none; border-left: 1px solid #444; padding-left: 10px; }
        .node.expanded > .children { display: block; }
        .level-0 > .label { border-left: 6px solid var(--gold); background: #1a1a1a; }
        .highlight { background: #4a3a00 !important; border: 2px solid var(--gold) !important; box-shadow: 0 0 10px rgba(212,175,55,0.6); }

        /* Guide & Fault Cards */
        .card { background: #252525; padding: 20px; border-radius: 10px; margin-bottom: 15px; border-left: 6px solid var(--sop-green); line-height: 1.7; transition: 0.3s; }
        .card.hidden { display: none; }
        .card.search-match { border-color: var(--gold); background: #332b00; }
        .fault-card { border-left-color: var(--danger); background: #2d1d1f; }
        .step-tag { background: var(--sop-green); color: white; padding: 2px 10px; border-radius: 4px; margin-right: 10px; font-weight: bold; }
        h3 { color: var(--gold); border-bottom: 1px solid #444; padding-bottom: 10px; margin-top: 0; scroll-margin-top: 20px; font-size: 1.5em; }
        b.warn { color: var(--gold); }
        .fault-q { color: var(--danger); font-weight: bold; font-size: 1.1em; display: block; margin-bottom: 8px; }
    </style>
</head>
<body>

<div class="main-wrapper">
    <header>
        <h2 style="margin:0">Panasonic PT-RQ35K æ™ºæ…§å°è¦½æ§åˆ¶å° V18</h2>
    </header>

    <div class="search-area">
        <input type="text" id="searchInput" placeholder="æœå°‹å•é¡Œæˆ–åŠŸèƒ½ (ä¾‹ï¼šé‚„åŸã€è®Šæš—ã€æ­ªäº†ã€ä¿¡è™Ÿã€å¯†ç¢¼...)" oninput="globalSearch()">
        <div class="btn-group">
            <button id="toggleBtn" class="btn btn-toggle" onclick="handleMasterToggle()">ğŸ“‚ å…¨éƒ¨å±•é–‹</button>
            <button class="btn btn-gold" onclick="jumpTo('sopSection')">ğŸš€ æ–°æ‰‹ SOP</button>
            <button class="btn btn-red" onclick="jumpTo('faultSection')">âš ï¸ ç°¡æ˜“æ•…éšœæª¢æ¸¬</button>
        </div>
    </div>

    <div class="main-container">
        <div class="tree-view" id="menuTree"></div>
        
        <div class="guide-view" id="infoDisplay">
            <div id="sopSection">
                <h3>ğŸš€ æ–°æ‰‹å®‰è£é–‹æ©Ÿ SOP</h3>
                <div class="card" data-tags="åˆå§‹åŒ– é‚„åŸ å‡ºå»  é‡è¨­ reset"><span class="step-tag">1</span><b>åˆå§‹åŒ– (Initialize)</b><br>è·¯å¾‘ï¼š[PROJECTOR SETUP] -> [INITIALIZE]ã€‚ç¢ºä¿æ¸…é™¤ä¹‹å‰æ´»å‹•çš„æ‰€æœ‰æ®˜ç•™æ ¡æ­£èˆ‡å¯†ç¢¼ã€‚</div>
                <div class="card" data-tags="é¡é ­ å°ç„¦ æ¨¡ç³Š æ ¡æ­£ calibration"><span class="step-tag">2</span><b>é¡é ­æ ¡æ­£ (Lens Calibration)</b><br>è·¯å¾‘ï¼š[LENS] -> [LENS CALIBRATION]ã€‚æ›´æ›é¡é ­æˆ–æ¬é‹å¾Œå¿…åšï¼Œç¢ºä¿æ­¥é€²é¦¬é”æ­¸ä½ã€‚</div>
                <div class="card" data-tags="é›»å£“ äº®åº¦ 220V 110V è®Šæš—"><span class="step-tag">3</span><b>ç¢ºèªé›»å£“ (220V)</b><br>è·¯å¾‘ï¼š[STATUS] é é¢ã€‚PT-RQ35K åœ¨ 110V ä¸‹äº®åº¦æœƒè‡ªå‹•è¢«é™åˆ¶åœ¨ 1/3 (ç´„ 10,000 lm)ã€‚</div>
                <div class="card" data-tags="ç¶²æ ¼ æ ¼å­ åœ–æ¨£å°ä½ pattern"><span class="step-tag">4</span><b>èª¿ç”¨æ¸¬è©¦åœ–æ¨£</b><br>è·¯å¾‘ï¼š[TEST PATTERN] -> é¸æ“‡ [CROSSHATCH]ã€‚èª¿æ•´ç•«é¢æ¶µè“‹ç¯„åœèˆ‡å¹¾ä½•ä¿®æ­£ã€‚</div>
            </div>

            <div id="faultSection" style="margin-top: 50px;">
                <h3>âš ï¸ ç°¡æ˜“æ•…éšœæª¢æ¸¬</h3>
                <div class="card fault-card" data-tags="æš— äº®åº¦ é›»å£“ 110V æ¨¡å¼ Eco Quiet"><span class="fault-q">Q: ç•«é¢ä¸å¤ äº® / è®Šæš—äº†ï¼Ÿ</span>1. æª¢æŸ¥ [STATUS] é›»å£“ï¼Œç¢ºèªæ˜¯å¦æ¥åœ¨ 220Vã€‚110V æœƒç æ‰ 2/3 äº®åº¦ã€‚<br>2. æª¢æŸ¥ [OPERATION SETTING]ï¼Œç¢ºä¿æœªè¨­ç‚º Eco æˆ– Quietã€‚</div>
                <div class="card fault-card" data-tags="è¨Šè™Ÿ æ²’ç•«é¢ é»‘ç•«é¢ sdi é »ç‡"><span class="fault-q">Q: ç•«é¢æ²’è¨Šè™Ÿ (No Signal)ï¼Ÿ</span>1. æª¢æŸ¥ [SIGNAL LIST] ç¢ºèªè¼¸å…¥æºæ ¼å¼ã€‚<br>2. è‹¥æ˜¯ SDIï¼Œç¢ºèª [SDI MODE] çš„ Level-A/B è¨­å®šæ˜¯å¦èˆ‡ç™¼é€ç«¯åŒ¹é…ã€‚</div>
                <div class="card fault-card" data-tags="ä¸è¦‹ é¸å–® æ¶ˆå¤± é …ç›® åç°"><span class="fault-q">Q: é¸å–®é …ç›®æ¶ˆå¤±æˆ–åç°ï¼Ÿ</span>æª¢æŸ¥ [DISPLAY OPTION] -> [MENU MODE]ã€‚å‹™å¿…è¨­ç‚º <b>NORMAL</b>ï¼Œè¨­ç‚º SIMPLE æœƒéš±è—å°ˆæ¥­åŠŸèƒ½ã€‚</div>
                <div class="card fault-card" data-tags="é™æ§å™¨ åæ‡‰ id å¯†ç¢¼ æ¥æ”¶å™¨"><span class="fault-q">Q: é™æ§å™¨æ§åˆ¶æ²’åæ‡‰ï¼Ÿ</span>æª¢æŸ¥é™æ§å™¨èˆ‡æ©Ÿèº«çš„ [PROJECTOR ID]ã€‚ç¢ºä¿æ¥æ”¶å™¨ [REMOTE CONTROL] æœªè¨­ç‚º Disableã€‚</div>
                <div class="card fault-card" data-tags="å°ç„¦ æ¨¡ç³Š é¦¬é” è®Šç„¦"><span class="fault-q">Q: é¡é ­ç„¡æ³•èšç„¦æˆ–æ¨¡ç³Šï¼Ÿ</span>åŸ·è¡Œä¸€æ¬¡ [LENS CALIBRATION]ã€‚è‹¥ç’°å¢ƒæº«åº¦è®ŠåŒ–å¤§ï¼Œè«‹é–‹å•Ÿ [ACTIVE FOCUS OPTIMIZER]ã€‚</div>
            </div>
        </div>
    </div>
</div>

<script>
    // é¸å–®è³‡æ–™å®Œæ•´é–å®š
    const menuData = [
        { title: "1. å½±åƒé¸å–® (PICTURE)", tags: "äº®åº¦ å°æ¯” 3D ç•«è³ª", children: [
            { title: "å½±åƒæ¨¡å¼ (PICTURE MODE)" }, { title: "å°æ¯”/äº®åº¦ (CONTRAST / BRIGHTNESS)" },
            { title: "3D è¨­å®š (3D SETTINGS)", children: [{ title: "3D è¼¸å…¥æ ¼å¼" }, { title: "3D åŒæ­¥" }] }
        ]},
        { title: "2. ä½ç½®é¸å–® (POSITION)", tags: "æ­ªäº† æ¢¯å½¢ è®Šå½¢ ç¸®æ”¾", children: [
            { title: "ä½ç§» (SHIFT)" }, { title: "é•·å¯¬æ¯” (ASPECT)" }, { title: "ç¸®æ”¾ (ZOOM)" },
            { title: "å¹¾ä½•æ ¡æ­£ (GEOMETRY)", children: [{ title: "æ¢¯å½¢ä¿®æ­£ (KEYSTONE)" }, { title: "å››è§’ä¿®æ­£" }, { title: "è‡ªç”±æ ¼é» (FREE GRID)" }] }
        ]},
        { title: "6. æŠ•å½±æ©Ÿè¨­å®š (PROJECTOR SETUP)", tags: "åˆå§‹åŒ– é‚„åŸ é¡é ­ åˆå§‹åŒ–", children: [
            { title: "é¡é ­è¨­å®š (LENS)", children: [{ title: "é¡é ­æ ¡æ­£ (LENS CALIBRATION)" }, { title: "ä¸»å‹•å°ç„¦å„ªåŒ–" }] },
            { title: "åˆå§‹åŒ– (INITIALIZE)", tags: "é‚„åŸ é‡è¨­ å‡ºå» " },
            { title: "ç‹€æ…‹æŸ¥çœ‹ (STATUS)", tags: "é›»å£“ åºè™Ÿ æº«åº¦" }
        ]},
        { title: "7. æ¸¬è©¦åœ–æ¨£ (TEST PATTERN)", tags: "æ ¼å­ ç¶²æ ¼", children: [{ title: "å…§éƒ¨æ¸¬è©¦åœ–æ¨£" }, { title: "åœ–æ¨£è¨­å®š" }] },
        { title: "8. ä¿¡è™Ÿåˆ—è¡¨ (SIGNAL LIST)", tags: "è§£æåº¦ é »ç‡ æ²’è¨Šè™Ÿ", children: [{ title: "æ‰€æœ‰è¨Šè™Ÿæ¸…å–®" }, { title: "ç•¶å‰ä¿¡è™Ÿè³‡è¨Š" }] },
        { title: "9. å®‰å…¨æ€§ (SECURITY)", children: [{ title: "PINç¢¼è®Šæ›´" }, { title: "å®‰å…¨æ€§é–å®š" }] },
        { title: "10. ç¶²è·¯é¸å–® (NETWORK)", children: [{ title: "æœ‰ç·šç¶²è·¯ (WIRED LAN)" }, { title: "ç®¡ç†å“¡å¸³è™Ÿ" }] }
    ];

    let isAllExpanded = false;

    // æ‰‹æ©Ÿæ²å‹•å„ªåŒ–ï¼šè·³è½‰è‡³æ¨™é¡Œ
    function jumpTo(id) {
        const element = document.getElementById(id);
        const container = document.getElementById('infoDisplay');
        
        // æ¸…é™¤æœå°‹ä»¥é˜²å¡ç‰‡è¢«éš±è—
        document.getElementById('searchInput').value = "";
        globalSearch(); 

        if(window.innerWidth <= 768) {
            // æ‰‹æ©Ÿç«¯ï¼šå…¨ç¶²é æ²å‹•
            const headerOffset = 180; 
            const elementPosition = element.getBoundingClientRect().top;
            const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
            window.scrollTo({ top: offsetPosition, behavior: 'smooth' });
        } else {
            // é›»è…¦ç«¯ï¼šå³å´æ¡†å…§æ²å‹•
            container.scrollTo({ top: element.offsetTop - 10, behavior: 'smooth' });
        }
    }

    // æ¨¡ç³Šæœå°‹è¯å‹•
    function globalSearch() {
        const input = document.getElementById('searchInput').value.toLowerCase();
        const labels = document.querySelectorAll('.label');
        const cards = document.querySelectorAll('.card');
        
        if (!input) {
            labels.forEach(l => l.classList.remove('highlight'));
            cards.forEach(c => c.classList.remove('hidden', 'search-match'));
            return;
        }

        // é¸å–®æœå°‹
        labels.forEach(l => {
            const text = (l.innerText + l.getAttribute('data-tags')).toLowerCase();
            if (text.includes(input)) {
                l.classList.add('highlight');
                let p = l.parentElement;
                while (p && p.classList.contains('node')) { p.classList.add('expanded'); p = p.parentElement.parentElement; }
            } else { l.classList.remove('highlight'); }
        });

        // SOP/æ•…éšœå¡ç‰‡æœå°‹
        cards.forEach(c => {
            const tags = (c.getAttribute('data-tags') || "").toLowerCase();
            const content = c.innerText.toLowerCase();
            if (tags.includes(input) || content.includes(input)) {
                c.classList.remove('hidden');
                c.classList.add('search-match');
            } else {
                c.classList.add('hidden');
                c.classList.remove('search-match');
            }
        });
    }

    function handleMasterToggle() {
        isAllExpanded = !isAllExpanded;
        document.querySelectorAll('.node').forEach(n => isAllExpanded ? n.classList.add('expanded') : n.classList.remove('expanded'));
        document.getElementById('toggleBtn').innerHTML = isAllExpanded ? "ğŸ“ å…¨éƒ¨æ”¶åˆ" : "ğŸ“‚ å…¨éƒ¨å±•é–‹";
    }

    function draw(data, parent, level = 0) {
        data.forEach(item => {
            const node = document.createElement('div');
            node.className = `node level-${level} ${item.children ? '' : 'leaf'}`;
            const label = document.createElement('div');
            label.className = 'label';
            const split = item.title.split(' (');
            label.innerHTML = `<span class="cn-text">${split[0]}</span><span class="en-text">${split[1] ? '(' + split[1] : ''}</span>`;
            label.setAttribute('data-tags', `${item.title} ${item.tags || ''}`);
            label.onclick = (e) => { e.stopPropagation(); node.classList.toggle('expanded'); };
            node.appendChild(label);
            if (item.children) {
                const childWrap = document.createElement('div');
                childWrap.className = 'children';
                draw(item.children, childWrap, level + 1);
                node.appendChild(childWrap);
            }
            parent.appendChild(node);
        });
    }
    draw(menuData, document.getElementById('menuTree'));
</script>
</body>
</html>